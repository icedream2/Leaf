<html>
	<head>
		<title>Test</title>
		<script type="text/javascript" src="jquery-1.8.2.min.js"></script>
		<script>
			function sendMsg()
			{
				var s = $("#photo").attr("src");
				var tmp = new Object();
				tmp.img = s;
				alert("A");
			$.ajax({
				type:"GET",
				async:false,
				url:"http://localhost:8080/site2/dowork?img=" + encodeURIComponent($("#photo").attr("src")),
				dataType:"jsonp",
				jsonp:"callback", //服务器端用于接收callback调用的function名的参数
				jsonpCallback:"success_jsonpCallback", //callback的function名称
				success: function(json){
					alert(json.val);
					alert("success");
				},
				error: function(){
					alert("fail");
				}
			});
			}
		</script>
	</head>
	<body>
		<div><a onclick="sendMsg();">Click Me</a></div>
		<img id="photo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACkUlEQVQ4jTWTzWudZRDFfzPz3I/E9jbeRM2HAbFGFCIuRIRGFxVLUXAjSEUR96KL6qKgCwWl+AeI/4KLLgWlLvzaWBVxIYKKIKgl0SQmuQtv0vd95rh409XsZub8zjn21en7hJw0wBIpKdmneoIlyAmBgDRwEgBUqNZQEgcDU8UUyAdwMpjf2GB85gwn19fpLy/hgyBluIlmZ5/J9z/wy5tvUFxQ3bvNchZfeIbFF59ndPpuMhM3IwlcIhHmlTKaI4Z9zIxSHYyWMnOCtcvvMv/0eQzITMyMaoEmBxzt/gsKYmFEfzTHdHcHq0EpCqqLtffeYeHJ80iViuFyNj+8wu7Vq/z326+0+xOE0zsxoreyRMz0usNSZf7s48w/dQ5RkUG0lZ9eu8jOJ59SFCSVxDEzDvf+Zrq3TeRN6TgrF54lqUDgGWx//gU7H3/W6ZZID4KAmkQtRDpGYiQuF7MPrhPqYdZZNfnmO4o6eFhCiswWwmm9AWsRBVHwpBJliAyk2nkcTlqDWYAKWOImqolQjy43SajFQ3Dj+l9IAjMMMX7iHArHs5KWFBmtO6UCJOmJLEGFeGm8+LbPDhg/9iiyxNKZWVlm9p57Odq6Th4ckE0HFxe9uTHD5RXayT5VLfbl2v3ywZAHPnifUxuPIA9SSZgj4PDPP2g2t6hNpTdeoH/HbUy+vsbPr16iektRBnV6xI8vv8Jdl15n8bkLRJTjvIvB6irDO1fBDGWCV6abW2QITyihpIZgmvz+1mX+ufIR47Mb3PrwQ/SWbidumcMGjo5a8vAGzd42+9e+JWlwRSdBGTgt6YHV9higQH7chUqLddZa99zNphar1sGT8GpAYNUBSEsSIXPKcYtd3UwKoZb/AWRoSOxcHDTnAAAAAElFTkSuQmCC"></img>
	</body>
</html>